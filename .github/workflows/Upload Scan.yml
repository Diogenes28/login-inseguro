name: Veracode Upload Scan          # Nome do workflow na aba Actions do GitHub

on:
  workflow_dispatch:                # Permite rodar o workflow manualmente

jobs:
  upload_scan:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout do reposit√≥rio
        uses: actions/checkout@v3

      - name: Veracode Upload & Scan
        uses: veracode/veracode-uploadandscan-action@0.2.6

        with:
          appname: "login-inseguro"            # Nome da aplica√ß√£o na Veracode
          createprofile: true                  # Cria automaticamente o perfil, se n√£o existir
          filepath: "codigo-php.zip"           # üëâ ENVIA SOMENTE o arquivo .zip com seu c√≥digo PHP
          version: "1.0.${{ github.run_number }}"  # Vers√£o autom√°tica
          vid: ${{ secrets.VERACODE_API_ID }}  # ID da API (guardado com seguran√ßa)
          vkey: ${{ secrets.VERACODE_API_KEY }}  # Chave da API (guardado com seguran√ßa)
